# koishi-plugin-slave-market

[![npm](https://img.shields.io/npm/v/koishi-plugin-slave-market?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-slave-market)

[![爱发电](https://img.shields.io/badge/爱发电-支持作者-FF4D4D?style=flat-square)](https://afdian.com/item/fd7899e40b2711f0a67d52540025c377)

大牛马时代 🐂🐎 - 一个基于 Koishi 的群聊游戏插件

## 功能特点

### 基础系统
- 🏦 银行系统：存款、取款、利息、转账
- 👥 牛马市场 🐂🐎：购买、训练、决斗
- 🌾 种地系统：种植、收获、作物状态
- 🛡️ 保镖系统：雇佣保镖、保护状态
- ⚔️ 反抗系统：牛马反抗、获得自由 🐂🐎
- 🏪 道具商城：购买、使用、管理外观
- 🎮 决斗系统：牛马之间的战斗 🐂🐎
- 🎲 训练系统：提升牛马属性

### 游戏特色
- 💰 经济系统：完整的货币流通体系
- 📈 成长系统：身价、信用等级、存款上限
- ⏰ 冷却系统：合理的操作冷却时间
- 🎯 概率系统：训练、决斗、反抗等概率机制
- 🎮 互动系统：玩家之间的交易与互动
- 🏆 成就系统：完成特定目标获得奖励

## 快速开始

1. 安装插件
   ```bash
   npm install koishi-plugin-slave-market
   ```
2. 在 Koishi 配置文件中启用插件
   ```js
   export default {
     plugins: {
       'slave-market': {
         // 参考下文“配置说明”，根据需要调整
       },
     },
   }
   ```
3. 发送 `注册玩家 <昵称> <性别>` 完成注册，输入 `我的信息` 查看状态或 `玩家帮助` 获取内置帮助图像。

## 购买指南

如果您喜欢这个插件，可以通过以下方式支持作者：

1. 访问 [爱发电](https://afdian.com/item/fd7899e40b2711f0a67d52540025c377) 进行购买
2. 选择您想要的支持方案
3. 完成支付后，您将获得相应的支持者权益

您的支持将帮助我们持续改进插件，添加更多有趣的功能！

## 使用说明

### 基础指令
- `注册玩家 [昵称] [性别]` - 注册成为玩家
- `我的信息` - 查看个人信息与冷却状态
- `玩家帮助` - 生成内置 HTML 帮助图

### VIP & 自动化
- `vip兑换 <卡密>` - 兑换 VIP
- `vip状态` - 查看 VIP 剩余时间与特权
- `自动任务 [action] [taskName]` - VIP 控制自动打工/收获/存款

### 牛马指令 🐂🐎
- `牛马市场` - 查看可购买玩家
- `我的牛马` - 查看自己拥有的牛马
- `牛马列表` - 分页展示牛马
- `牛马状态 <昵称>` - 查看指定牛马详情
- `购买玩家 <昵称>` - 购买指定玩家
- `放生 <昵称>` - 解除雇佣关系
- `赎身` - 支付赎金获得自由
- `牛马排行` - 查看拥有量排行榜

### 银行与经济
- `打工` - 打工赚钱并给牛马主分成
- `抢劫 <昵称>` - 抢劫指定玩家余额
- `存款 <金额>` / `取款 <金额>` - 管理银行存取
- `领取利息` - 领取累计利息
- `银行信息` - 查看存款、利息、上限
- `升级信用` - 提升信用等级
- `转账 <昵称> <金额>` - 转账并支付手续费

### 农务指令
- `种地 <作物>` - 种植指定作物
- `收获` - 收割成熟作物
- `作物状态` - 查看成长进度

### 保镖指令
- `保镖市场` - 查看可雇佣的保镖
- `雇佣保镖 <名称>` - 雇佣指定保镖
- `保镖状态` - 查看保护剩余时间

### 排行 & 天气
- `身价排行` - 查看身价值排行榜
- `资金排行` - 查看资产排行榜
- `天气` - 查询当前季节与天气加成

### 监狱系统
- `监狱打工` - 服刑期间打工
- `监狱状态` - 查看监狱冷却与收益
- `监狱名单` - 查看当前在押玩家

### 管理与维护
- `重置游戏` - 管理员重置数据
- `备份列表` / `立即备份` / `恢复备份 <文件>` - 管理数据备份
- `添加管理员 <昵称>` / `移除管理员 <昵称>` - 调整管理员
- `管理员列表` - 查看管理员清单

### 赞助
- `赞助` - 查看赞助方式
- `赞助权益` - 查看 VIP 特权

## 指令速查

> 注：尖括号 `< >` 表示必填参数，方括号 `[ ]` 表示可选参数，@ 指代被 @ 的用户。

| 分类 | 指令 | 说明 |
| --- | --- | --- |
| 注册 & 帮助 | `注册玩家 <nickname> <gender>` | 创建角色，性别只能为「男/女」 |
| 注册 & 帮助 | `玩家帮助` | 生成 Puppeteer 帮助图（HTML 手册） |
| 注册 & 帮助 | `我的信息` | 查看个人资产、冷却、作物、监狱等状态 |
| 管理 & 维护 | `重置游戏` | 仅管理员可用，重置所有数据 |
| VIP & 自动化 | `vip兑换 <cardId>` | 使用卡密兑换 VIP |
| VIP & 自动化 | `vip状态` | 查看 VIP 有效期及特权 |
| VIP & 自动化 | `自动任务 [action] [taskName]` | VIP 控制自动打工/收获/存款任务 |
| 市场 & 牛马🐂🐎 | `牛马市场` | 查看可购买玩家 |
| 市场 & 牛马🐂🐎 | `我的牛马` | 查看自己购买的牛马 |
| 市场 & 牛马🐂🐎 | `牛马列表` | 以分页形式展示牛马 |
| 市场 & 牛马🐂🐎 | `购买玩家 <nickname>` | 采购指定昵称玩家 |
| 市场 & 牛马🐂🐎 | `放生 <target>` | 无条件解除主仆关系 |
| 市场 & 牛马🐂🐎 | `赎身` | 牛马支付赎金返回自由 |
| 市场 & 牛马🐂🐎 | `牛马状态 <target>` | 查看牛马冷却、保镖、价格等 |
| 经济 & 银行 | `打工` | 主动收益并给雇主抽成 |
| 经济 & 银行 | `抢劫 <target>` | 抢劫目标余额（受概率影响） |
| 经济 & 银行 | `存款 <amount>` | 存款并计算利息 |
| 经济 & 银行 | `取款 <amount>` | 从银行取钱 |
| 经济 & 银行 | `领取利息` | 领取累计利息（最多 24h） |
| 经济 & 银行 | `银行信息` | 查看存款、利息、上限 |
| 经济 & 银行 | `升级信用` | 提升信用等级、扩充上限 |
| 经济 & 银行 | `转账 <target> <amount>` | 对其他玩家转账（含手续费） |
| 保镖系统 | `保镖市场` | 查看可雇佣保镖列表 |
| 保镖系统 | `雇佣保镖 <guardName>` | 雇佣指定等级/名称保镖 |
| 保镖系统 | `保镖状态` | 查看当前保镖与剩余时间 |
| 农场系统 | `种地 <cropName>` | 种植作物，受天气加成影响 |
| 农场系统 | `收获` | 收割成熟作物 |
| 农场系统 | `作物状态` | 查看成长剩余时间 |
| 装扮 & 道具 | `装扮商店` | 查看上架外观 |
| 装扮 & 道具 | `装扮背包` | 查看已拥有外观 |
| 装扮 & 道具 | `购买装扮 <itemName>` | 消耗金币购买 |
| 装扮 & 道具 | `装备装扮 <itemName>` | 穿戴指定部位 |
| 装扮 & 道具 | `脱下装扮 <itemName>` | 卸下当前装扮 |
| 装扮 & 道具 | `我的装扮` | 查看当前套装 |
| 排行 & 天气 | `牛马排行` | 牛马数量排名 |
| 排行 & 天气 | `身价排行` | 个人身价值 |
| 排行 & 天气 | `资金排行` | 资产排行榜 |
| 排行 & 天气 | `天气` | 查询季节、天气、效果 |
| 监狱系统 | `监狱打工` | 服刑期间打工减刑/收益 |
| 监狱系统 | `监狱状态` | 当前监狱冷却与收益 |
| 监狱系统 | `监狱名单` | 查看入狱玩家列表 |
| 数据 & 管理 | `备份列表` | 查看现有备份 |
| 数据 & 管理 | `恢复备份 <backupFile>` | 从备份文件恢复 |
| 数据 & 管理 | `立即备份` | 立刻触发一次备份 |
| 管理权限 | `添加管理员 <nickname>` | 绑定昵称对应用户为管理员 |
| 管理权限 | `移除管理员 <nickname>` | 取消管理员资格 |
| 管理权限 | `管理员列表` | 查看所有管理员 |
| 赞助 & 福利 | `赞助` | 输出赞助链接与方式 |
| 赞助 & 福利 | `赞助权益` | 查看成为赞助者可享权益 |

## 游戏规则

### 初始设定
- 初始身价：100
- 初始存款上限：1000
- 初始信用等级：1
- 初始余额：0
- 初始反抗成功率：30%
- 初始训练成功率：50%

### 收入来源
- 打工：基础收入为身价的10%
- 抢劫：可抢劫目标30%的余额
- 存款利息：每小时1%的利息收入
- 每日签到：随机奖励
- 牛马劳动：牛马可产生收入 🐂🐎

### 特殊机制
- 金融危机：系统余额低于5万时触发
- 游戏胜利：拥有100个以上牛马且每个身价超过10万 🐂🐎
- 游戏失败：系统余额小于0
- 反抗系统：牛马可以通过反抗获得自由 🐂🐎
- 训练系统：提升牛马属性
- 决斗系统：牛马之间可以决斗

### 冷却时间
- 购买：5分钟
- 打工：2分钟
- 抢劫：1分钟
- 转账：2分钟
- 反抗：1小时
- 训练：30分钟
- 决斗：15分钟
- 签到：24小时

## 注意事项
- 存款利息最多累计24小时
- 所有交易将收取一定比例手续费
- 信用等级提升可增加存款上限
- 训练和决斗都有成功/失败概率
- 反抗失败会降低反抗成功率
- 每日反抗次数有限
- 保镖可以保护玩家免受抢劫
- 牛马可以通过训练提升属性 🐂🐎

## 更新日志

### [1.0.0] - 2024-03-xx
- 基础功能实现
- 银行系统
- 牛马市场 🐂🐎
- 训练系统
- 决斗系统
- 种地系统
- 保镖系统
- 反抗系统
- 道具商城
- 每日签到
- 排行榜系统

## 贡献指南
欢迎提交 Issue 和 Pull Request 来帮助改进这个插件。

## 许可证
MIT License
